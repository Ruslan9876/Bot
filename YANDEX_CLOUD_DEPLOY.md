# üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Yandex Cloud –∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Telegram Bot

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Telegram –±–æ—Ç–∞](#1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-telegram-–±–æ—Ç–∞)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞](#2-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Yandex Cloud](#3-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-yandex-cloud)
4. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ](#4-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ-–Ω–∞-–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π-–º–∞—à–∏–Ω–µ)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ SSL](#5-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–¥–æ–º–µ–Ω–∞-–∏-ssl)
6. [–ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞](#6-–∑–∞–ø—É—Å–∫-–∏-–ø—Ä–æ–≤–µ—Ä–∫–∞)
7. [–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ](#7-–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ)

---

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Telegram –±–æ—Ç–∞

### –®–∞–≥ 1.1: –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É: `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è: **Diabetes Assistant**
4. –í–≤–µ–¥–∏—Ç–µ username: **diabetes_assistant_bot** (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `_bot`)
5. **–°–û–•–†–ê–ù–ò–¢–ï –¢–û–ö–ï–ù!**

**–ü—Ä–∏–º–µ—Ä —Ç–æ–∫–µ–Ω–∞:**
```
1234567890:ABCdefGHIjklMNOpqrsTUVwxyz123456789
```

### –®–∞–≥ 1.2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã

–û—Ç–ø—Ä–∞–≤—å—Ç–µ BotFather:
```
/setcommands
```
–í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ:
```
start - üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
help - ‚ùì –ü–æ–º–æ—â—å
settings - ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
stats - üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

### –®–∞–≥ 1.3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ

```
/setdescription
```
–í—Å—Ç–∞–≤—å—Ç–µ:
```
–£–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–±–µ—Ç–æ–º ü§ñüíô

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± –∏–∑–º–µ—Ä–µ–Ω–∏—è—Ö  
üìä –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –≤—Ä–∞—á—É
üíä –ö–æ–Ω—Ç—Ä–æ–ª—å –ª–µ–∫–∞—Ä—Å—Ç–≤ –∏ –ø–∏—Ç–∞–Ω–∏—è
```

---

## 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 2.1: –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å

# Server
PORT=3000
NODE_ENV=production

# Database  
DB_PATH=/var/www/diabetes-app/database.db

# Web App URL (–æ–±–Ω–æ–≤–∏—Ç–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è)
WEB_APP_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.ru
```

### –®–∞–≥ 2.2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .gitignore

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.gitignore` –µ—Å—Ç—å:
```
.env
node_modules/
database.db
*.log
```

### –®–∞–≥ 2.3: –û–±–Ω–æ–≤–∏—Ç–µ package.json

–î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è production:
```json
{
  "scripts": {
    "start": "node server/index.js",
    "dev": "concurrently \"npm run server\" \"npm run client\"",
    "server": "node server/index.js",
    "pm2": "pm2 start server/index.js --name diabetes-app"
  }
}
```

### –®–∞–≥ 2.4: –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –ø—Ä–æ–µ–∫—Ç –∫ –¥–µ–ø–ª–æ—é

```powershell
# –í –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
git init
git add .
git commit -m "Initial commit with AI assistant"
```

–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ GitHub:
```powershell
git remote add origin https://github.com/–≤–∞—à-username/diabetes-app.git
git push -u origin main
```

---

## 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Yandex Cloud

### –®–∞–≥ 3.1: –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [cloud.yandex.ru](https://cloud.yandex.ru)
2. –ù–∞–∂–º–∏—Ç–µ **–ù–∞—á–∞—Ç—å** –∏ –≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å ID
3. –°–æ–∑–¥–∞–π—Ç–µ **–±–∏–ª–ª–∏–Ω–≥-–∞–∫–∫–∞—É–Ω—Ç** (–Ω—É–∂–Ω–∞ –∫–∞—Ä—Ç–∞, –Ω–æ –µ—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≥—Ä–∞–Ω—Ç)
4. –ü–æ–ª—É—á–∏—Ç–µ **4000‚ÇΩ –Ω–∞ 60 –¥–Ω–µ–π** (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≥—Ä–∞–Ω—Ç –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

### –®–∞–≥ 3.2: –°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ (Folder)

1. –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud –Ω–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥**
2. –ò–º—è: `diabetes-app`
3. –û–ø–∏—Å–∞–Ω–∏–µ: `Telegram Web App –¥–ª—è –¥–∏–∞–±–µ—Ç–∞`
4. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å**

### –®–∞–≥ 3.3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Yandex Cloud CLI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è Windows (PowerShell):
```powershell
iex (New-Object System.Net.WebClient).DownloadString('https://storage.yandexcloud.net/yandexcloud-yc/install.ps1')
```

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
```powershell
yc init
```

---

## 4. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

### –®–∞–≥ 4.1: –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É

1. –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Compute Cloud**
2. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å –í–ú**

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **–ò–º—è:** `diabetes-app-vm`
- **–ó–æ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:** `ru-central1-a`
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Intel Ice Lake
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
  - vCPU: 2
  - RAM: 2 –ì–ë
  - –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–ª—è: 20%
  
**–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~500‚ÇΩ/–º–µ—Å—è—Ü (–ø–æ–∫—Ä–æ–µ—Ç—Å—è –≥—Ä–∞–Ω—Ç–æ–º)

**–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:**
- **–û–±—Ä–∞–∑:** Ubuntu 22.04 LTS
- **–î–∏—Å–∫:** 10 –ì–ë HDD (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)

**–î–æ—Å—Ç—É–ø:**
- ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ SSH-–∫–ª—é—á –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
- ‚úÖ –í–∫–ª—é—á–∏—Ç–µ **–ü—É–±–ª–∏—á–Ω—ã–π IP –∞–¥—Ä–µ—Å**

3. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å –í–ú**

### –®–∞–≥ 4.2: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –í–ú –ø–æ SSH

**Windows (PowerShell):**
```powershell
ssh yc-user@<–ü–£–ë–õ–ò–ß–ù–´–ô_IP>
```

**–ì–¥–µ –≤–∑—è—Ç—å IP:** –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud ‚Üí Compute Cloud ‚Üí –≤–∞—à–∞ –í–ú

### –®–∞–≥ 4.3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –ü–û

```bash
# –û–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js 18.x
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏
node --version  # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å v18.x
npm --version   # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 9.x

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PM2 (–º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
sudo npm install -g pm2

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Git
sudo apt install -y git

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx (–≤–µ–±-—Å–µ—Ä–≤–µ—Ä)
sudo apt install -y nginx

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Certbot (–¥–ª—è SSL)
sudo apt install -y certbot python3-certbot-nginx
```

### –®–∞–≥ 4.4: –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑ GitHub (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
cd /var/www
sudo git clone https://github.com/–≤–∞—à-username/diabetes-app.git
sudo chown -R $USER:$USER diabetes-app
cd diabetes-app
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ SCP (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Git)**
```powershell
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
scp -r c:\Users\Ruslan\Desktop\mvp yc-user@<IP>:/tmp/diabetes-app
```

–ó–∞—Ç–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
sudo mv /tmp/diabetes-app /var/www/
sudo chown -R $USER:$USER /var/www/diabetes-app
cd /var/www/diabetes-app
```

### –®–∞–≥ 4.5: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install --production

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
nano .env
```

–í—Å—Ç–∞–≤—å—Ç–µ –≤ .env:
```env
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_—Ç–æ–∫–µ–Ω
PORT=3000
NODE_ENV=production
DB_PATH=/var/www/diabetes-app/database.db
WEB_APP_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.ru
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+O`, `Enter`, `Ctrl+X`

### –®–∞–≥ 4.6: –°–æ–±–µ—Ä–∏—Ç–µ frontend

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É client
cd /var/www/diabetes-app/client

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Vite –ª–æ–∫–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm install

# –°–æ–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏–∫—É
npx vite build

# –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–µ–Ω—å
cd /var/www/diabetes-app
```

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –≤ `client/dist/`

### –®–∞–≥ 4.7: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è —Å–∞–π—Ç–∞
sudo nano /etc/nginx/sites-available/diabetes-app
```

–í—Å—Ç–∞–≤—å—Ç–µ:
```nginx
server {
    listen 80;
    server_name –≤–∞—à-–¥–æ–º–µ–Ω.ru www.–≤–∞—à-–¥–æ–º–µ–Ω.ru;

    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (frontend)
    location / {
        root /var/www/diabetes-app/client/dist;
        try_files $uri $uri/ /index.html;
    }

    # API (backend)
    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_cache_bypass $http_upgrade;
    }
}
```

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥:
```bash
sudo ln -s /etc/nginx/sites-available/diabetes-app /etc/nginx/sites-enabled/
sudo nginx -t  # –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo systemctl restart nginx
```

---

## 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ SSL

### –®–∞–≥ 5.1: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω

1. –ö—É–ø–∏—Ç–µ –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ [reg.ru](https://www.reg.ru) –∏–ª–∏ [nic.ru](https://www.nic.ru))
2. –í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º –¥–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å—å:
   ```
   –¢–∏–ø: A
   –ò–º—è: @
   –ó–Ω–∞—á–µ–Ω–∏–µ: <–ü–£–ë–õ–ò–ß–ù–´–ô_IP_–í–ê–®–ï–ô_–í–ú>
   TTL: 3600
   ```
3. –î–æ–±–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å—å –¥–ª—è www:
   ```
   –¢–∏–ø: A
   –ò–º—è: www
   –ó–Ω–∞—á–µ–Ω–∏–µ: <–ü–£–ë–õ–ò–ß–ù–´–ô_IP_–í–ê–®–ï–ô_–í–ú>
   TTL: 3600
   ```

**‚è∞ –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-30 –º–∏–Ω—É—Ç** –ø–æ–∫–∞ DNS –æ–±–Ω–æ–≤–∏—Ç—Å—è

### –®–∞–≥ 5.2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (HTTPS)

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ –≤–∞—à-–¥–æ–º–µ–Ω.ru –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω
sudo certbot --nginx -d –≤–∞—à-–¥–æ–º–µ–Ω.ru -d www.–≤–∞—à-–¥–æ–º–µ–Ω.ru
```

Certbot —Å–ø—Ä–æ—Å–∏—Ç:
- Email: –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à email
- –°–æ–≥–ª–∞—Å–∏–µ —Å ToS: Yes
- Sharing email: No (–∏–ª–∏ Yes, –∫–∞–∫ —Ö–æ—Ç–∏—Ç–µ)
- Redirect HTTP to HTTPS: Yes (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ñ–∏–≥ Nginx –∏ –¥–æ–±–∞–≤–∏—Ç SSL!

### –®–∞–≥ 5.3: –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```bash
# –¢–µ—Å—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
sudo certbot renew --dry-run
```

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç –∑–∞–¥–∞—á—É –≤ cron –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∫–∞–∂–¥—ã–µ 3 –º–µ—Å—è—Ü–∞.

---

## 6. –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞

### –®–∞–≥ 6.1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ PM2

```bash
cd /var/www/diabetes-app

# –ó–∞–ø—É—Å–∫
pm2 start server/index.js --name diabetes-app

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
pm2 startup
pm2 save

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
pm2 status
pm2 logs diabetes-app
```

### –®–∞–≥ 6.2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: `https://–≤–∞—à-–¥–æ–º–µ–Ω.ru`
2. –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API: `https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/api/` (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ 404, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)

### –®–∞–≥ 6.3: –û–±–Ω–æ–≤–∏—Ç–µ URL –≤ .env –∏ Telegram

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
nano /var/www/diabetes-app/.env
```

–ò–∑–º–µ–Ω–∏—Ç–µ:
```env
WEB_APP_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.ru
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
pm2 restart diabetes-app
```

**–í Telegram:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ BotFather
2. `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí **Bot Settings** ‚Üí **Menu Button**
3. **Edit Menu Button URL**
4. –í–≤–µ–¥–∏—Ç–µ: `https://–≤–∞—à-–¥–æ–º–µ–Ω.ru`

### –®–∞–≥ 6.4: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç!

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ (–ø–æ username)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **üì± –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
5. –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≤–∞—à–µ Web App!

**üéâ –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç - –ü–û–ó–î–†–ê–í–õ–Ø–Æ! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ!**

---

## 7. –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PM2

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 status

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs diabetes-app

# –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ –æ—à–∏–±–æ–∫
pm2 logs diabetes-app --err

# –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏
pm2 flush

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart diabetes-app

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
pm2 stop diabetes-app

# –£–¥–∞–ª–µ–Ω–∏–µ
pm2 delete diabetes-app
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
cd /var/www/diabetes-app

# –ï—Å–ª–∏ —á–µ—Ä–µ–∑ Git
git pull origin main
npm install --production

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ frontend (–µ—Å–ª–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
cd client
npx vite build
cd ..

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
pm2 restart diabetes-app
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
pm2 monit

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
free -h

# –õ–æ–≥–∏ Nginx
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –±—ç–∫–∞–ø–∞
nano /var/www/diabetes-app/backup.sh
```

–í—Å—Ç–∞–≤—å—Ç–µ:
```bash
#!/bin/bash
DATE=$(date +%Y-%m-%d_%H-%M-%S)
cp /var/www/diabetes-app/database.db /var/www/diabetes-app/backups/database_$DATE.db
# –£–¥–∞–ª–∏—Ç—å –±—ç–∫–∞–ø—ã —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
find /var/www/diabetes-app/backups/ -name "*.db" -mtime +30 -delete
```

–°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
```bash
chmod +x /var/www/diabetes-app/backup.sh
mkdir -p /var/www/diabetes-app/backups
```

–î–æ–±–∞–≤—å—Ç–µ –≤ cron (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 03:00):
```bash
crontab -e
```
–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
```
0 3 * * * /var/www/diabetes-app/backup.sh
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

```bash
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall
sudo ufw allow OpenSSH
sudo ufw allow 'Nginx Full'
sudo ufw enable

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo ufw status

# –û–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É —Ä–µ–≥—É–ª—è—Ä–Ω–æ
sudo apt update && sudo apt upgrade -y
```

---

## üéØ –ß–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] –°–æ–∑–¥–∞–Ω Telegram –±–æ—Ç, –ø–æ–ª—É—á–µ–Ω —Ç–æ–∫–µ–Ω
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ (/start, /help, etc.)
- [ ] –°–æ–∑–¥–∞–Ω–∞ –í–ú –≤ Yandex Cloud
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Node.js, PM2, Nginx, Certbot
- [ ] –ü—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –°–æ–∑–¥–∞–Ω .env —Å —Ç–æ–∫–µ–Ω–æ–º –±–æ—Ç–∞
- [ ] –°–æ–±—Ä–∞–Ω frontend (vite build)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω Nginx
- [ ] –ö—É–ø–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–æ–º–µ–Ω
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- [ ] –ó–∞–ø—É—â–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ PM2
- [ ] –û–±–Ω–æ–≤–ª—ë–Ω WEB_APP_URL –≤ .env
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ Menu –≤ Telegram
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ /start
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

**–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≥—Ä–∞–Ω—Ç–∞ 4000‚ÇΩ:**

- –í–ú (2 vCPU, 2GB RAM): ~500‚ÇΩ/–º–µ—Å
- –î–∏—Å–∫ 10GB HDD: ~80‚ÇΩ/–º–µ—Å
- –ü—É–±–ª–∏—á–Ω—ã–π IP: ~250‚ÇΩ/–º–µ—Å
- **–ò—Ç–æ–≥–æ:** ~830‚ÇΩ/–º–µ—Å

**–ì—Ä–∞–Ω—Ç –ø–æ–∫—Ä–æ–µ—Ç ~4.8 –º–µ—Å—è—Ü–µ–≤ —Ä–∞–±–æ—Ç—ã!**

–ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≥—Ä–∞–Ω—Ç–∞ –º–æ–∂–Ω–æ:
- –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (1 vCPU, 1GB RAM) - ~300‚ÇΩ/–º–µ—Å
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ—Ä—ã–≤–∞–µ–º—É—é –í–ú (–¥–µ—à–µ–≤–ª–µ –Ω–∞ 50-70%)
- –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ shared —Ö–æ—Å—Ç–∏–Ω–≥

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Yandex Cloud](https://cloud.yandex.ru/docs)
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [Telegram Web Apps](https://core.telegram.org/bots/webapps)
- [PM2 Documentation](https://pm2.keymetrics.io/docs/usage/quick-start/)
- [Nginx Configuration](https://nginx.org/ru/docs/)
- [Certbot](https://certbot.eff.org/)

---

## üÜò –ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º?**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PM2: `pm2 logs diabetes-app`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Nginx: `sudo tail -f /var/log/nginx/error.log`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å: `pm2 status`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç: `sudo netstat -tlnp | grep 3000`

**Telegram –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç?**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ .env
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ WEB_APP_URL –≤ .env
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `pm2 restart diabetes-app`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞: `pm2 logs diabetes-app | grep "Telegram"`

---

**–ì–æ—Ç–æ–≤–æ! –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–ª–∞–∫–µ! üöÄ‚òÅÔ∏è**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram, –Ω–∞–∂–∞—Ç—å /start –∏ –Ω–∞—á–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è!
